<html>

    <head>
        <title>f3</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    </head>

    <body>
        <div class="container mt-3">
        <table class="table">
             <thead>

                 <th>comment</th>
             </thead>
             <tbody id="tbody1">

             </tbody>
        </table>
    </div>


        <script type="module">

            var stdNo = 0;
            var tbody = document.getElementById('tbody1');

          function AddItemToTable(name, comment){
              let trow = document.createElement("trow");
              let td1 = document.createElement('td');
              let td2 = document.createElement('td');

              
              td1.innerHTML = name;
              td2.innerHTML = comment;
            
            trow.appendChild(td1);
            trow.appendChild(td2);

            tbody.appendChild(trow);
        }

        function AddAllItemsToTable(Comments_array) {
            stdNo = 0;
            tbody.innerHTML="";
            Comments_array.forEach(element => {
                AddItemToTable(element.Name, element.Comment);
            });
        }

//------------configuration---------------
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyD_gaBH0TtyEOZXdCGOCaJ0aFdurx308mA",
          authDomain: "demoproject-6b1be.firebaseapp.com",
          projectId: "demoproject-6b1be",
          storageBucket: "demoproject-6b1be.appspot.com",
          messagingSenderId: "963040741632",
          appId: "1:963040741632:web:a25affb13d9b7b9d71cbe5"
        };

        const app = initializeApp(firebaseConfig);

        import { getFirestore, collection, addDoc, getDocs, setDoc, doc, onSnapshot  } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

        const db = getFirestore();
            //--------------get data------------- 
            async function GetAllDataOnce(){
            const querySnapshot = await getDocs(collection(db, "Comments"));

            var comment = [];

            querySnapshot.forEach(doc => {
                comment.push(doc.data());
            });

            AddAllItemsToTable(comment);
        }
        
        async function GetAllDataRealtime(){
            const dbRef = collection(db, "Comments");

            onSnapshot(dbRef, (querySnapshot) => {
                var comment = [];

                querySnapshot.forEach(doc => {
                    comment.push(doc.data());
                });
            AddAllItemsToTable(comment);
            });
            
        }
        window.onload = GetAllDataRealtime;
        </script>
    </body>
</html>